<html>
<head>
<script>
function Snake()
{
    this.arr=[[0,0,0,0],
              [0,0,1,0],
              [0,0,1,0],
              [0,0,0,0]];
    this.dir=0;//shang
    this.points=[[1,2],[2,2]];
    this.show=function()
              {
                    for(var i in this.arr)
                    {
                        for(var j in this.arr[i])
                        {
                            this.arr[i][j]=0;
                        }
                    }
                    for(var i in this.points)
                    {
                        var p = this.points[i];
                        this.arr[p[0]][p[1]]=1;
                    }
                    return this.arr;
              }
    this.moveleft= function()
                   {
                        var dir = -1;
                        if(dir+this.dir==0)
                            return;
                        this.points.pop();
                        var head = this.points[0];
                        if(head[1]-1<0)
                        {
                            head[1]=this.arr[0].length-1;
                            var next = [head[0],head[1]];
                        }
                        else
                        var next = [head[0],head[1]-1];
                        this.points.unshift(next);
                        this.dir=dir;
                        this.show();
                   }
    this.moveright= function()
                   {
                        var dir = 1;
                        if(dir+this.dir==0)
                            return;
                        this.points.pop();
                        var head = this.points[0];
                        if(head[1]+1>this.arr[0].length-1)
                        {
                            head[1]=0;
                            var next=[head[0],head[1]];
                        }
                        else
                        var next = [head[0],head[1]+1];
                        this.points.unshift(next);
                        this.dir=dir;
                        this.show();
                   }
    this.movetop= function()
                   {
                        var dir = -2;
                        if(dir+this.dir==0)
                            return;
                        this.points.pop();
                        var head = this.points[0];
                        if(head[0]-1<0)
                        {
                            head[0]=this.arr.length-1;
                            var next=[head[0],head[1]];
                        }
                        else
                        var next = [head[0]-1,head[1]];
                        this.points.unshift(next);
                        this.dir=dir;
                        this.show();
                   }
    this.movedown= function()
                   {
                        var dir = 2;
                        if(dir+this.dir==0)
                            return;
                        this.points.pop();
                        var head = this.points[0];
                        if(head[0]+1>this.arr.length-1)
                        {
                            head[0]=0;
                            var next=[head[0],head[1]];
                        }
                        else
                        var next = [head[0]+1,head[1]];
                        this.points.unshift(next);
                        this.dir=dir;
                        this.show();
                   }                   
    this.divs=[];
    this.showHTML=function()
    {
        if(this.divs.length==0)
            this.initHTML();
        else
        {
            for(var i in this.arr)
            {
                for(var j in this.arr[i])
                {
                    if(this.arr[i][j]==0)
                        this.divs[i][j].style.background="gray";
                    else
                        this.divs[i][j].style.background="black";                        
                }
            }            
        }

    }
    this.initHTML=function()
    {
        for(var i in this.arr)
        {
            var d=[];
            for(var j in this.arr[i])
            {
                var div=document.createElement("div");
                div.style.width="100px";
                div.style.height="100px";
                if(this.arr[i][j]==0)
                    div.style.background="gray";
                else
                    div.style.background="black";
                div.style.position="absolute";
                div.style.left=j*100+"px";
                div.style.top=i*100+"px";
                document.body.appendChild(div);
                d.push(div);
            }
            this.divs.push(d);
        }
    
    }
                   
}
var s=new Snake();
function f(e)
{
    if(e.keyCode==37)
    {
        s.moveleft();
        s.showHTML();
    }
    if(e.keyCode==38)
    {
        s.movetop();
        s.showHTML();
    }
    if(e.keyCode==39)
    {
        s.moveright();
        s.showHTML();
    }
    if(e.keyCode==40)
    {
        s.movedown();
        s.showHTML();
    }
}
document.onkeydown=f;
</script>
</head>
<body onload="s.showHTML();">
</body>
</html>